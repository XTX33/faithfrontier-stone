{%- comment -%}
Global and per-page scripts

Cache busting:
- Prefer site.assets_version (set in _config.yml)
- Fallback to site.github.build_revision (GitHub Pages)
- Final fallback: "10"

Front matter support:
- page.page_js: array of script paths (your layout supports this)
- page.scripts: legacy alias (supported here too)

Notes:
- `type="module"` scripts are grouped.
- performance-monitor only loads when enabled.
{%- endcomment -%}

{%- assign v = site.assets_version | default: site.version | default: site.github.build_revision | default: '10' -%}

{%- comment -%} Core UI {%- endcomment -%}
<script defer class="u-hidden-print" src="{{ '/assets/js/theme-toggle.js' | relative_url }}?v={{ v }}"></script>
<script defer class="u-hidden-print" src="{{ '/assets/js/premium-header.js' | relative_url }}?v={{ v }}"></script>
<script defer class="u-hidden-print" src="{{ '/assets/js/page-transitions.js' | relative_url }}?v={{ v }}"></script>
<script defer class="u-hidden-print" src="{{ '/assets/js/lazy-loading.js' | relative_url }}?v={{ v }}"></script>

{%- comment -%}
Performance monitor
Enable per page:
  performance_monitor: true
Or globally:
  performance_monitor: true
{%- endcomment -%}
{%- if page.performance_monitor == true or site.performance_monitor == true -%}
<script defer class="u-hidden-print" src="{{ '/assets/js/performance-monitor.js' | relative_url }}?v={{ v }}"></script>
{%- endif -%}

{%- comment -%} Contrast system (modules) {%- endcomment -%}
<script defer type="module" class="u-hidden-print" src="{{ '/assets/js/contrast-utils.js' | relative_url }}?v={{ v }}"></script>
<script defer type="module" class="u-hidden-print" src="{{ '/assets/js/adaptive-contrast.js' | relative_url }}?v={{ v }}"></script>

{%- comment -%} Site-wide behaviors {%- endcomment -%}
<script defer class="u-hidden-print" src="{{ '/assets/js/animations.js' | relative_url }}?v={{ v }}"></script>
<script defer class="u-hidden-print" src="{{ '/assets/js/logo-easter-egg.js' | relative_url }}?v={{ v }}"></script>
<script defer class="u-hidden-print" src="{{ '/assets/js/main.js' | relative_url }}?v={{ v }}"></script>

{%- comment -%}
Per-page scripts
Supports both:
- page.page_js (preferred; matches your layout)
- page.scripts (legacy alias)
{%- endcomment -%}

{%- assign page_js = page.page_js | default: page.scripts -%}
{%- if page_js -%}
  {%- for src in page_js -%}
    <script defer class="u-hidden-print" src="{{ src | relative_url }}?v={{ v }}"></script>
  {%- endfor -%}
{%- endif -%}
